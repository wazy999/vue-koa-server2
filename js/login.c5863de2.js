(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"340a":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),r("div",{staticClass:"box"},[r("div",{staticClass:"left"}),r("div",{staticClass:"right"},[r("div",{staticClass:"title"},[e._v("Login")]),r("el-form",{ref:"ruleForm",staticClass:"login-form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{staticClass:"login-form-item",attrs:{prop:"name"}},[r("el-input",{ref:"name-input",attrs:{placeholder:"请输入用户名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{staticClass:"login-form-item",attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码","auto-complete":"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{staticClass:"login-form-item"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)])])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"banner"},[r("div",{staticClass:"tree"}),r("div",{staticClass:"desc"},[r("p",[e._v("欢迎登录")]),r("p",[e._v("团队博客后台管理系统")])])])}],n=(r("7f7f"),r("bb36")),i={name:"LoginPage",components:{},data:function(){var e=function(e,t,r){""===t?r(new Error("请输入密码")):r()};return{ruleForm:{name:"",password:""},rules:{name:[{required:!0,message:"请输入您的名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],password:[{required:!0,validator:e,trigger:"blur"}]}}},mounted:function(){this.enterKeyup(),this.inputAutofocus()},destroyed:function(){this.enterKeyupDestroyed()},methods:{inputAutofocus:function(){var e=this;this.$nextTick((function(){e.$refs["name-input"].focus()}))},enterKey:function(e){var t=this.$options.name;if("LoginPage"===t){var r=e.keyCode?e.keyCode:e.which?e.which:e.charCode;13==r&&this.submitForm("ruleForm")}},enterKeyupDestroyed:function(){document.removeEventListener("keyup",this.enterKey)},enterKeyup:function(){document.addEventListener("keyup",this.enterKey)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;window.localStorage.setItem("ms_username",t.ruleForm.name),n["a"].userLogin(t.ruleForm).then((function(e){var r=e.data;window.sessionStorage.setItem("token",r.token),t.$message({type:"info",message:"登录成功！",duration:1e3,showClose:!0}),t.$router.push("/")})).catch((function(){console.log("userLogin err"),t.$message({type:"error",message:"账户或密码错误！"})}))}))}}},a=i,u=(r("51dc"),r("2877")),c=Object(u["a"])(a,s,o,!1,null,"33dea3f4",null);t["default"]=c.exports},"51dc":function(e,t,r){"use strict";var s=r("f0fc"),o=r.n(s);o.a},bb36:function(e,t,r){"use strict";var s=r("bc3a"),o=r.n(s),n=r("db49"),i=o.a.create({timeout:5e3,headers:{"Content-Type":"application/json;charset=UTF-8"},baseURL:n["a"].baseURL});i.interceptors.request.use((function(e){var t=window.sessionStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e})),i.interceptors.response.use((function(e){return e}),(function(e){if(e.response)switch(e.response.status){case 401:break;case 409:break}return Promise.reject(e.response)})),t["a"]={getArticles:function(){return i.get("/articles")},postAnArticle:function(e){return i.post("/articles/new",e)},removeAnArticle:function(e){return i.delete("/articles/"+e)},userRegister:function(e){return i.post("/users",e)},userLogin:function(e){return i.post("/users/login",e)},getUsers:function(){return i.get("/users")},delUser:function(e){return i.post("/users/delUser",e)}}},db49:function(e,t,r){"use strict";t["a"]={yuqueToken:"qQMNC7DWhyRsHrYmxVmKf1KgFEe0RcOM9YpgDSh7",docsUrl:"api/v2/repos/mijixunzong/kb/docs/",baseURL:"http://localhost:5000",authorsAndBooks:[{author:"mijixunzong",user_id:1792765,book:"kb"},{author:"iscott",user_id:87555,book:"dudu"},{author:"weis",user_id:153571,book:"talk"}]}},f0fc:function(e,t,r){}}]);