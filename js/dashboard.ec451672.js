(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"04ad":function(t,e,s){"use strict";var n=s("9191"),r=s.n(n);r.a},"5a0c":function(t,e,s){!function(e,s){t.exports=s()}(0,(function(){"use strict";var t="millisecond",e="second",s="minute",n="hour",r="day",i="week",a="month",o="quarter",c="year",u="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,s){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(s)+t},f={s:d,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),n=Math.floor(s/60),r=s%60;return(e<=0?"+":"-")+d(n,2,"0")+":"+d(r,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var n=12*(s.year()-e.year())+(s.month()-e.month()),r=e.clone().add(n,a),i=s-r<0,o=e.clone().add(n+(i?-1:1),a);return+(-(n+(s-r)/(i?r-o:o-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:a,y:c,w:i,d:r,D:u,h:n,m:s,s:e,ms:t,Q:o}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",v={};v[p]=g;var m=function(t){return t instanceof k},$=function(t,e,s){var n;if(!t)return p;if("string"==typeof t)v[t]&&(n=t),e&&(v[t]=e,n=t);else{var r=t.name;v[r]=t,n=r}return!s&&n&&(p=n),n||!s&&p},b=function(t,e){if(m(t))return t.clone();var s="object"==typeof e?e:{};return s.date=t,s.args=arguments,new k(s)},y=f;y.l=$,y.i=m,y.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var k=function(){function d(t){this.$L=this.$L||$(t.locale,null,!0),this.parse(t)}var f=d.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(l);if(n){var r=n[2]-1||0,i=(n[7]||"0").substring(0,3);return s?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return y},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var s=b(t);return this.startOf(e)<=s&&s<=this.endOf(e)},f.isAfter=function(t,e){return b(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<b(t)},f.$g=function(t,e,s){return y.u(t)?this[e]:this.set(s,t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,o){var l=this,h=!!y.u(o)||o,d=y.p(t),f=function(t,e){var s=y.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return h?s:s.endOf(r)},g=function(t,e){return y.w(l.toDate()[t].apply(l.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},p=this.$W,v=this.$M,m=this.$D,$="set"+(this.$u?"UTC":"");switch(d){case c:return h?f(1,0):f(31,11);case a:return h?f(1,v):f(0,v+1);case i:var b=this.$locale().weekStart||0,k=(p<b?p+7:p)-b;return f(h?m-k:m+(6-k),v);case r:case u:return g($+"Hours",0);case n:return g($+"Minutes",1);case s:return g($+"Seconds",2);case e:return g($+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(i,o){var l,h=y.p(i),d="set"+(this.$u?"UTC":""),f=(l={},l[r]=d+"Date",l[u]=d+"Date",l[a]=d+"Month",l[c]=d+"FullYear",l[n]=d+"Hours",l[s]=d+"Minutes",l[e]=d+"Seconds",l[t]=d+"Milliseconds",l)[h],g=h===r?this.$D+(o-this.$W):o;if(h===a||h===c){var p=this.clone().set(u,1);p.$d[f](g),p.init(),this.$d=p.set(u,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](g);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[y.p(t)]()},f.add=function(t,o){var u,l=this;t=Number(t);var h=y.p(o),d=function(e){var s=b(l);return y.w(s.date(s.date()+Math.round(e*t)),l)};if(h===a)return this.set(a,this.$M+t);if(h===c)return this.set(c,this.$y+t);if(h===r)return d(1);if(h===i)return d(7);var f=(u={},u[s]=6e4,u[n]=36e5,u[e]=1e3,u)[h]||1,g=this.$d.getTime()+t*f;return y.w(g,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var s=t||"YYYY-MM-DDTHH:mm:ssZ",n=y.z(this),r=this.$locale(),i=this.$H,a=this.$m,o=this.$M,c=r.weekdays,u=r.months,l=function(t,n,r,i){return t&&(t[n]||t(e,s))||r[n].substr(0,i)},d=function(t){return y.s(i%12||12,t,"0")},f=r.meridiem||function(t,e,s){var n=t<12?"AM":"PM";return s?n.toLowerCase():n},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:y.s(o+1,2,"0"),MMM:l(r.monthsShort,o,u,3),MMMM:l(u,o),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,c,2),ddd:l(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:y.s(i,2,"0"),h:d(1),hh:d(2),a:f(i,a,!0),A:f(i,a,!1),m:String(a),mm:y.s(a,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:n};return s.replace(h,(function(t,e){return e||g[t]||n.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,u,l){var h,d=y.p(u),f=b(t),g=6e4*(f.utcOffset()-this.utcOffset()),p=this-f,v=y.m(this,f);return v=(h={},h[c]=v/12,h[a]=v,h[o]=v/3,h[i]=(p-g)/6048e5,h[r]=(p-g)/864e5,h[n]=p/36e5,h[s]=p/6e4,h[e]=p/1e3,h)[d]||p,l?v:y.a(v)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return v[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),n=$(t,e,!0);return n&&(s.$L=n),s},f.clone=function(){return y.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}(),w=k.prototype;return b.prototype=w,[["$ms",t],["$s",e],["$m",s],["$H",n],["$W",r],["$M",a],["$y",c],["$D",u]].forEach((function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),b.extend=function(t,e){return t(e,k,b),b},b.locale=$,b.isDayjs=m,b.unix=function(t){return b(1e3*t)},b.en=v[p],b.Ls=v,b}))},7159:function(t,e,s){t.exports=s.p+"img/img.146655c9.jpg"},9191:function(t,e,s){},bb36:function(t,e,s){"use strict";var n=s("bc3a"),r=s.n(n),i=s("db49"),a=r.a.create({timeout:5e3,headers:{"Content-Type":"application/json;charset=UTF-8"},baseURL:i["a"].baseURL});a.interceptors.request.use((function(t){var e=window.sessionStorage.getItem("token");return e&&(t.headers.Authorization="Bearer "+e),t})),a.interceptors.response.use((function(t){return t}),(function(t){if(t.response)switch(t.response.status){case 401:break;case 409:break}return Promise.reject(t.response)})),e["a"]={getArticles:function(){return a.get("/articles")},postAnArticle:function(t){return a.post("/articles/new",t)},removeAnArticle:function(t){return a.delete("/articles/"+t)},userRegister:function(t){return a.post("/users",t)},userLogin:function(t){return a.post("/users/login",t)},getUsers:function(){return a.get("/users")},delUser:function(t){return a.post("/users/delUser",t)}}},db49:function(t,e,s){"use strict";e["a"]={yuqueToken:"qQMNC7DWhyRsHrYmxVmKf1KgFEe0RcOM9YpgDSh7",docsUrl:"api/v2/repos/mijixunzong/kb/docs/",baseURL:"http://120.79.115.240:5000",authorsAndBooks:[{author:"mijixunzong",user_id:1792765,book:"kb"},{author:"iscott",user_id:87555,book:"dudu"},{author:"weis",user_id:153571,book:"talk"}]}},e2ad:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{staticClass:"left-sider",attrs:{span:8}},[n("el-card",{staticClass:"mgb20",staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[n("div",{staticClass:"user-info"},[n("img",{staticClass:"user-avator",attrs:{src:s("7159"),alt:""}}),n("div",{staticClass:"user-info-cont"},[n("div",{staticClass:"user-info-name"},[t._v(t._s(t.name))]),n("div",[t._v(t._s(t.role))])])]),n("div",{staticClass:"user-info-list"},[t._v("\n\t\t\t\t\t\t上次登录时间：\n\t\t\t\t\t\t"),n("span",[t._v(t._s(t._f("formatDate")(t.last_login)))])]),n("div",{staticClass:"user-info-list"},[t._v("\n\t\t\t\t\t\t上次登录地点：\n\t\t\t\t\t\t"),n("span",[t._v("广州")])])]),n("el-card",{attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("语言详情")])]),t._v("\n          Vue "),n("el-progress",{attrs:{percentage:81.7,color:"#42b983"}}),t._v("\n          JavaScript "),n("el-progress",{attrs:{percentage:14.4,color:"#f1e05a"}}),t._v("\n          CSS "),n("el-progress",{attrs:{percentage:3.2}}),t._v("\n          Other "),n("el-progress",{attrs:{percentage:.7,color:"#f56c6c"}})],1)],1),n("el-col",{attrs:{span:16}},[n("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"grid-content grid-con-1"},[n("i",{staticClass:"el-icon-lx-people grid-con-icon"}),n("div",{staticClass:"grid-cont-right"},[n("div",{staticClass:"grid-num"},[t._v("1234")]),n("div",[t._v("用户访问量")])])])])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"grid-content grid-con-2"},[n("i",{staticClass:"el-icon-lx-notice grid-con-icon"}),n("div",{staticClass:"grid-cont-right"},[n("div",{staticClass:"grid-num"},[t._v("321")]),n("div",[t._v("系统消息")])])])])],1),n("el-col",{attrs:{span:8}},[n("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"grid-content grid-con-3"},[n("i",{staticClass:"el-icon-lx-goods grid-con-icon"}),n("div",{staticClass:"grid-cont-right"},[n("div",{staticClass:"grid-num"},[t._v("5000")]),n("div",[t._v("数量")])])])])],1)],1),n("el-card",{staticClass:"articles-list",staticStyle:{height:"465px"},attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("文章列表")]),n("div",{staticClass:"btns"},[n("el-row",[n("el-button",{attrs:{type:"primary"},on:{click:t.synArticles}},[t._v("同步文章")]),n("el-button",{attrs:{type:"primary"},on:{click:t.doPersistence}},[t._v("文章持久化")]),n("el-button",{attrs:{type:"primary"},on:{click:t.doNotPersistence}},[t._v("取消持久化")])],1)],1)]),n("el-checkbox-group",{on:{change:t.handleCheckedLabelsChange},model:{value:t.checkedLabels,callback:function(e){t.checkedLabels=e},expression:"checkedLabels"}},t._l(t.displayList,(function(e){return n("li",{key:e.id},[n("el-checkbox",{attrs:{label:e}},[n("router-link",{attrs:{target:"_blank",to:"/articles/"+e.id+"?userId="+e.user_id}},[t._v("\n                  "+t._s(e.title)+"\n                ")])],1)],1)})),0),n("el-checkbox",{staticClass:"select-all",attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[n("span",[t._v("全选")])]),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.list.length},on:{"prev-click":t.toPrevPage,"next-click":t.toNextPage,"current-change":t.changeCurrentPage}})],1)],1)],1)],1)],1)},r=[],i=(s("7f7f"),s("db49")),a=s("bb36"),o=s("5a0c"),c=s.n(o),u={name:"dashboard",data:function(){return{blogs:[],list:[],displayList:[],currentPage:1,labels:[],checkAll:!1,isIndeterminate:!1,checkedLabels:[],selectedLabels:[],name:localStorage.getItem("ms_username"),last_login:1*window.localStorage.getItem("last_login")||(new Date).getTime()}},filters:{formatDate:function(t){return c()(t).format("YYYY-MM-DD")}},computed:{role:function(){return"admin"===this.name?"超级管理员":"普通用户"}},watch:{currentPage:function(){this.checkedLabels=[],this.checkAll=!1}},methods:{changeCurrentPage:function(t){this.currentPage=t,this.displayList=this.list.slice(10*(this.currentPage-1),10*this.currentPage)},toPrevPage:function(){this.currentPage-=1,this.displayList=this.list.slice(10*(this.currentPage-1),10*this.currentPage)},toNextPage:function(){this.currentPage+=1,this.displayList=this.list.slice(10*(this.currentPage-1),10*this.currentPage)},synArticles:function(){var t=this;this.$message({showClose:!0,message:"同步文章中~",type:"success",duration:1e3});var e=i["a"].authorsAndBooks.map((function(t){return"api/v2/repos/".concat(t.author,"/").concat(t.book,"/docs")})),s=[];console.log(e);for(var n=0;n<e.length;n++){var r=this.axios.get(e[n],{headers:{"X-Auth-Token":i["a"].yuqueToken}});s.push(r)}this.axios.all(s).then(this.axios.spread((function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];t.list=s.map((function(t){return t.data.data})).flat(),console.log(t.list),t.displayList=t.list.slice(10*(t.currentPage-1),10*t.currentPage),t.labels=t.list.map((function(t){return t.id}))})))},doNotPersistence:function(){var t=this;if(0===this.checkedLabels.length)return this.$message({showClose:!0,message:"请选择想要取消持久化的文章~",type:"warning"}),!1;console.log("doNotPersistence");for(var e=function(e){a["a"].removeAnArticle(t.checkedLabels[e].id).then((function(){t.$message({showClose:!0,message:"文章 ".concat(t.checkedLabels[e].title," 取消持久化完成~"),type:"success",duration:1500})})).catch((function(s){404===s.status&&t.$message({showClose:!0,message:"文章 ".concat(t.checkedLabels[e].title," 已经取消持久化~"),type:"warning",duration:1500})}))},s=0;s<this.checkedLabels.length;s++)e(s)},doPersistence:function(){var t=this;if(0===this.checkedLabels.length)return this.$message({showClose:!0,message:"请选择想要持久化的文章~",type:"warning"}),!1;console.log("doPersistence"),console.log(this.checkedLabels);for(var e=function(e){var s=i["a"].authorsAndBooks.filter((function(s){return s.user_id===t.checkedLabels[e].user_id})).shift(),n="api/v2/repos/".concat(s.author,"/").concat(s.book,"/docs/").concat(t.checkedLabels[e].id,"?raw=1");console.log(n),t.axios.get(n,{headers:{"X-Auth-Token":i["a"].yuqueToken}}).then((function(e){var s=e.data;a["a"].postAnArticle(s.data).then((function(){console.log("success"),t.$message({showClose:!0,message:"文章 ".concat(s.data.title," 持久化完成~"),type:"success",duration:1e3})})).catch((function(e){console.log(e),409===e.status&&t.$message({showClose:!0,message:"文章 ".concat(s.data.title," 已经持久化~"),type:"warning",duration:1e3})}))}))},s=0;s<this.checkedLabels.length;s++)e(s)},handleCheckAllChange:function(t){this.checkedLabels=t?this.list.slice(10*(this.currentPage-1),10*this.currentPage):[],this.isIndeterminate=!1},handleCheckedLabelsChange:function(t){console.log(t);var e=t.length;this.checkAll=e===this.labels.length,this.isIndeterminate=e>0&&e<this.labels.length}}},l=u,h=(s("04ad"),s("2877")),d=Object(h["a"])(l,n,r,!1,null,"115e3e3a",null);e["default"]=d.exports}}]);